<!DOCTYPE html>
<html lang="es">
  <head>
    <title>Login</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" href="favicon.ico" type="image/x-icon" />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/css/intlTelInput.css"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/intlTelInput.min.js"></script>
  </head>

  <body>
    <div class="container my-5">
      <div class="jumbotron">
        <h1>REGISTER</h1>
        <br />
        <form
          class="form"
          action="/register"
          method="post"
          role="form"
          autocomplete="off"
        >
          <div class="form-group">
            <input
              id="nombre"
              name="username"
              placeholder="nombre"
              class="form-control"
              type="text"
              required
            />
          </div>

          <div class="form-group">
            <input
              id="password"
              name="password"
              placeholder="password"
              class="form-control"
              type="password"
              required
            />
          </div>

          <div class="form-group">
            <input
              id="address"
              name="address"
              placeholder="address"
              class="form-control"
              type="text"
              required
            />
          </div>

          <div class="form-group">
            <input
              id="fullName"
              name="fullName"
              placeholder="fullName"
              class="form-control"
              type="text"
              required
            />
          </div>

          <div class="form-group">
            <input
              id="age"
              name="age"
              placeholder="age"
              class="form-control"
              type="number"
              required
            />
          </div>

          <div class="form-group">
            <input
              id="phoneNumber"
              type="tel"
              name="phoneNumber"
              class="form-control"
              required
            />
          </div>
          <button
            class="btn-success"
            id="verifyNumber"
            onclick="process(event)"
          >
            Verify
          </button>
          <div id="info" class="alert alert-info" style="display: none"></div>

          <!-- Avatar file -->

          <div class="form-group">
            <input
              class="btn btn-success my-3"
              type="submit"
              id="submit"
              value="Register"
              style="display: none"
            />
          </div>
        </form>
        <hr />

        <div class="text-left">
          <button
            class="btn btn-success my-3"
            onclick="location.href = '/login'"
          >
            Ir a Login
          </button>
        </div>
      </div>
    </div>
    <script>
      const phoneInputField = document.querySelector("#phoneNumber");
      const phoneInput = window.intlTelInput(phoneInputField, {
        utilsScript:
          "https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/utils.js",
      });
    </script>
    <script>
      const submit = document.querySelector("#submit");
      const info = document.querySelector("#info");
      info;

      function process(event) {
        event.preventDefault();
        console.log("clicked");
        const phoneNumber = phoneInput.getNumber();
        console.log(phoneInput);
        console.log(phoneNumber);
        // phoneInputField.value = "1231";
        phoneInputField.value = phoneNumber;

        if (!phoneNumber.includes("+")) {
          info.style.display = "";
          info.innerText = "Please add a valid phone number";
          submit.style.display = "none";
        } else {
          info.style.display = "none";
          submit.style.display = "";
        }

        // fix this
      }
    </script>
  </body>
</html>
